<form action="?" method="post" enctype="multipart/form-data" name="frmEdit" class="form-horizontal">
<table>
<tr><td></tr></tr>
</table>



<div class="form-group">
 <label class="col-lg-3 control-label">
   TITLE:(*)
 </label>
 <div class="col-lg-4"><input type="text" class="form-control" name="title" value="[#TITLE#]" id="title"> 
<small>Название камеры, например "Камера в коридоре" </small>
</div> 
</div>

	<div class="form-group">
	<label class="col-lg-3 control-label">Включено:&nbsp;&nbsp;
	 <input type="checkbox" name="enable" value="1"[#if ENABLE="1"#] checked[#endif#]> 
	</label>
	</div>

	<div class="form-group">
	<label class="col-lg-3 control-label">Игнорировать, когда дома кто-то есть:&nbsp;&nbsp;
	 <input type="checkbox" name="somebodyignore" value="1"[#if SOMEBODYIGNORE="1"#] checked[#endif#]> 
	</label>
	</div>




		<div class="form-group">
			<label class="col-lg-3 control-label">
			Тип потока:
			</label>
			<div class="col-lg-4">
<select name="type" class="form-control" style="width: 260px;" align="right">
<option[#if TYPE=""#] selected[#endif#]>snapshot
<option[#if TYPE="rtsp"#] selected[#endif#]>rtsp
<option[#if TYPE="snapshot_diff"#] selected[#endif#]>snapshot_diff
</select>

</div></div>

      [#if TYPE=""||TYPE="snapshot"||TYPE="snapshot_diff" #]



		<div class="form-group">
			<label class="col-lg-3 control-label">
			Формат фото:
			</label>
			<div class="col-lg-4">
                        <select name="method" class="form-control" style="width: 260px;" align="right">
                        <option[#if METHOD=""#] selected[#endif#]>jpeg
[#if TYPE="snapshot_diff"#]<option[#if METHOD="rtsp"#] selected[#endif#]>rtsp[#endif#]
                        </select>
                        </div></div>


	       [#endif#]

      [#if TYPE="snapshot_diff" #]

     		<div class="form-group">
<label class="col-lg-3 control-label">
			Чувствительность:
			</label>
			<div class="col-lg-4">
			<select name="sensity" class="form-control" style="width: 260px;" align="right">
			<option[#if SENSITY="5"|SENSITY=""#] selected[#endif#]>5
			<option[#if SENSITY="10"#] selected[#endif#]>10
			<option[#if SENSITY="15"#] selected[#endif#]>15
			<option[#if SENSITY="20"#] selected[#endif#]>20
			<option[#if SENSITY="25"#] selected[#endif#]>25
			<option[#if SENSITY="30"#] selected[#endif#]>30
			<option[#if SENSITY="35"#] selected[#endif#]>35
			<option[#if SENSITY="40"#] selected[#endif#]>40
			<option[#if SENSITY="45"#] selected[#endif#]>45
			<option[#if SENSITY="50"#] selected[#endif#]>50
			<option[#if SENSITY="55"#] selected[#endif#]>55
			<option[#if SENSITY="60"#] selected[#endif#]>60
			<option[#if SENSITY="65"#] selected[#endif#]>65
			<option[#if SENSITY="70"#] selected[#endif#]>70
			<option[#if SENSITY="75"#] selected[#endif#]>75
			<option[#if SENSITY="80"#] selected[#endif#]>80
			<option[#if SENSITY="85"#] selected[#endif#]>85
			<option[#if SENSITY="90"#] selected[#endif#]>90
			<option[#if SENSITY="95"#] selected[#endif#]>95
			<option[#if SENSITY="100"#] selected[#endif#]>100
			</select></div></div>

     		<div class="form-group">
<label class="col-lg-3 control-label">
			Задержка до следующего срабатывания (сек):
			</label>
			<div class="col-lg-4">
			<select name="delay" class="form-control" style="width: 260px;" align="right">

			<option[#if DELAY="1"#] selected[#endif#]>1
			<option[#if DELAY="5"#] selected[#endif#]>5
			<option[#if DELAY="10"|DELAY=""#] selected[#endif#]>10
			<option[#if DELAY="15"#] selected[#endif#]>15
			<option[#if DELAY="20"#] selected[#endif#]>20
			<option[#if DELAY="25"#] selected[#endif#]>25
			<option[#if DELAY="30"#] selected[#endif#]>30
			<option[#if DELAY="35"#] selected[#endif#]>35
			<option[#if DELAY="40"#] selected[#endif#]>40
			<option[#if DELAY="45"#] selected[#endif#]>45
			<option[#if DELAY="50"#] selected[#endif#]>50
			<option[#if DELAY="55"#] selected[#endif#]>55
			<option[#if DELAY="60"#] selected[#endif#]>60
			<option[#if DELAY="65"#] selected[#endif#]>65
			<option[#if DELAY="70"#] selected[#endif#]>70
			<option[#if DELAY="75"#] selected[#endif#]>75
			<option[#if DELAY="80"#] selected[#endif#]>80
			<option[#if DELAY="85"#] selected[#endif#]>85
			<option[#if DELAY="90"#] selected[#endif#]>90
			<option[#if DELAY="95"#] selected[#endif#]>95
			<option[#if DELAY="100"#] selected[#endif#]>100
			<option[#if DELAY="120"#] selected[#endif#]>120
			<option[#if DELAY="200"#] selected[#endif#]>200
			<option[#if DELAY="360"#] selected[#endif#]>360
			</select></div></div>

	       [#endif#]

      [#if TYPE="rtsp"#]



		<div class="form-group">
			<label class="col-lg-3 control-label">
			Формат видео:
			</label>
			<div class="col-lg-4">
                        <select name="method" class="form-control" style="width: 260px;" align="right">
                        <option[#if METHOD="mp4"#] selected[#endif#]>mp4
                        </select>
                        </div></div>
                        



		<div class="form-group">
			<label class="col-lg-3 control-label">
			Длительность:
			</label>
			<div class="col-lg-4">
			<select name="sec" class="form-control" style="width: 260px;" align="right">
			<option[#if SEC=""#] selected[#endif#]>5
			<option[#if SEC="10"#] selected[#endif#]>10
			<option[#if SEC="15"#] selected[#endif#]>15
			<option[#if SEC="30"#] selected[#endif#]>30
			<option[#if SEC="60"#] selected[#endif#]>60
			</select></div></div>

<div class="form-group">
 <label class="col-lg-3 control-label">
   FFMEGCMD:(*)
 </label>
 <div class="col-lg-4"><input type="text" class="form-control" name="ffmpegcmd" value="[#FFMPEGCMD#]" id="ffmpegcmd"> 
<small><small>Индивидуальные настройки для ffmpeg, заполняется, только  если в обычном режиме не получается записать фото или видео.</small></small><br>
<small><small>пример записи: ffmpeg -y -i rtsp://192.168.1.32:554/user=admin_password=tlJwpbo6_channel=1_stream=1.sdp?real_stream  -t #sec -f mp4 -vcodec copy -pix_fmt yuv420p -acodec copy -an -r 15 #savename</small></small>
</div> 
</div>


		[#endif#]





<div class="form-group">
 <label class="col-lg-3 control-label">
   URL:(*)
 </label>
 <div class="col-lg-4"><input type="text" class="form-control" name="url" value="[#URL#]" id="url"> 
<small><small>URL камеры (snapshot, rtsp) </small></small><br>
      [#if TYPE="snapshot"#]
<small><small>пример для snapshot: http://login:password@192.168.1.32/webcapture.jpg?command=snap&channel=0</small></small><br>
		[#endif#]
      [#if TYPE="rtsp"#]
<small><small>пример для rtsp:rtsp://192.168.1.32:554/user=admin_password=tlJwpbo6_channel=1_stream=1.sdp?real_stream </small></small><br>
<small><small>пример для rtsp:rtsp://login:password@192.168.1.32:554/channel1 </small></small>
		[#endif#]


</div> 
</div>

<div class="form-group">
 <label class="col-lg-3 control-label">
   IPADDR:(*)
 </label>
 <div class="col-lg-4"><input type="text" class="form-control" name="ipaddr" value="[#IPADDR#]" id="ipaddr"> 
<small><small>IP адрес  камеры, для определения доступности камеры </small></small>
</div> 
</div>

 <hr>

[#if TYPE="snapshot_diff" #]

<div class="form-group ">
        <label class="col-lg-4 control-label" for="inputTitle"><#LANG_LINKED_OBJECT4#> (датчик движения):</label>
        <div class="col-lg-5"><input type="text"  class="form-control "  name="linked_object4" id="linked_object4"  value="[#LINKED_OBJECT4#]" ></div>
</div>
<div class="form-group ">
        <label class="col-lg-4 control-label" for="inputTitle"><#LANG_LINKED_PROPERTY4#> (status):</label>
        <div class="col-lg-5"><input type="text"  class="form-control "  name="linked_property4" id="linked_property4" value="[#LINKED_PROPERTY4#]" ></div>
</div>
[#module name="linkedobject" object_field="linked_object4" property_field="linked_property4"#]

[#else#]
<div class="form-group ">
        <label class="col-lg-4 control-label" for="inputTitle"><#LANG_LINKED_OBJECT#> (датчик движения):</label>
        <div class="col-lg-5"><input type="text"  class="form-control "  name="linked_object" id="linked_object"  value="[#LINKED_OBJECT#]" ></div>
</div>
<div class="form-group ">
        <label class="col-lg-4 control-label" for="inputTitle"><#LANG_LINKED_PROPERTY#> (status):</label>
        <div class="col-lg-5"><input type="text"  class="form-control "  name="linked_property" id="linked_property" value="[#LINKED_PROPERTY#]" ></div>
</div>
[#module name="linkedobject" object_field="linked_object" property_field="linked_property"#]
<br>

<div class="form-group ">
        <label class="col-lg-4 control-label" for="inputTitle"><#LANG_LINKED_OBJECT#> (датчик двери):</label>
        <div class="col-lg-5"><input type="text"  class="form-control "  name="linked_object2" id="linked_object2"  value="[#LINKED_OBJECT2#]" ></div>
</div>
<div class="form-group ">
        <label class="col-lg-4 control-label" for="inputTitle"><#LANG_LINKED_PROPERTY#> (status):</label>
        <div class="col-lg-5"><input type="text"  class="form-control "  name="linked_property2" id="linked_property2" value="[#LINKED_PROPERTY2#]" ></div>
</div>

[#module name="linkedobject" object_field="linked_object2" property_field="linked_property2"#]
<br>
<div class="form-group ">
        <label class="col-lg-4 control-label" for="inputTitle"><#LANG_LINKED_OBJECT#> (датчик дополнительный):</label>
        <div class="col-lg-5"><input type="text"  class="form-control "  name="linked_object3" id="linked_object3"  value="[#LINKED_OBJECT3#]" ></div>
</div>
<div class="form-group ">
        <label class="col-lg-4 control-label" for="inputTitle"><#LANG_LINKED_PROPERTY#> (status):</label>
        <div class="col-lg-5"><input type="text"  class="form-control "  name="linked_property3" id="linked_property3" value="[#LINKED_PROPERTY3#]" ></div>
</div>
[#module name="linkedobject" object_field="linked_object3" property_field="linked_property3"#]
[#endif#]

<hr>








		<div class="form-group">
			<label class="col-lg-3 control-label">
			Срок хранения(дней):
			</label>
			<div class="col-lg-4">
<select name="srok" class="form-control" style="width: 260px;" align="right">
<option[#if SROK=""#] selected[#endif#]>7
<option[#if SROK="14"#] selected[#endif#]>14
<option[#if SROK="30"#] selected[#endif#]>30
<option[#if SROK="60"#] selected[#endif#]>60
<option[#if SROK="120"#] selected[#endif#]>120
<option[#if SROK="365"#] selected[#endif#]>365
</select>

</div></div>

<div class="form-group">
	<label class="col-lg-3 control-label">Принудительный опрос  раз в час?&nbsp;&nbsp;
 <input type="checkbox" name="hourly" value="1"[#if HOURLY="1"#] checked[#endif#]> 
</label>
</div>

<!--
		<div class="form-group">
			<label class="col-lg-3 control-label">


	<label class="col-lg-3 control-label">Реагировать только на сработку  сенсора&nbsp;&nbsp;
 <input type="checkbox" name="enable1" value="1"[#if ENABLE1="1"#] checked[#endif#]> 
</label>
</div>
-->


		<div class="form-group">
			<label class="col-lg-3 control-label">
			На что реагировать:
			</label>
			<div class="col-lg-4">
<select name="enable1" class="form-control" style="width: 260px;" align="right">
<option[#if ENABLE1=""#] selected[#endif#]>Любое изменение свойства
<option[#if ENABLE1="1"#] selected[#endif#]>Реагировать только на 1
<option[#if ENABLE1="2"#] selected[#endif#]>Реагировать только на 0
</select>

</div></div>



		<div class="form-group">
			<label class="col-lg-3 control-label">


	<label class="col-lg-3 control-label">Отправлять в telegram?&nbsp;&nbsp;
 <input type="checkbox" name="sendtelegram" value="1"[#if SENDTELEGRAM="1"#] checked[#endif#]> 
</label>
</div>
<!--
<br>
ID: [#ID#]
<br>
TELEGRAMUSERS: [#TELEGRAMUSERS#]


<br>
LIST_ACCESS:         [#begin LIST_ACCESS#]
[#ACCESS_USER#]
[#end LIST_ACCESS#]
    
-->

[#if SENDTELEGRAM="1"#]
<div class="form-group" id="list_users">
	<label class="control-label"><#LANG_MODULE_USERS#></label>
	<div class="controls">
        [#begin LIST_ACCESS#]
        <div class="[#if ADMIN='1'#] admin[#else#] user[#endif#]">
            <label><input class="users" type="checkbox" id=[#ID#] name="ACCESS_USER" value="[#ACCESS_USER#]"[#if ACCESS_USER='1'#] checked[#endif#] onchange="OnChangeChecked();">[#NAME#]</label>
        </div>
        [#end LIST_ACCESS#]
	</div>
</div>	
<script type="text/javascript">
	function OnChangeChecked () {    
        var i;
        var list="";
        var x = document.getElementsByClassName("users");
        for (i = 0; i < x.length; i++) {
            if (x[i].checked)
            {
                if (list!="")list = list + ",";
                list = list + x[i].id;
            }
        }
        document.getElementById('users_id').value = list;
    }
</script> 
<script type="text/javascript">  
	OnChangeAccess(document.getElementById('access'));
    OnChangeChecked();
</script> 

[#endif#]


<br>
<div class="form-group">
	<label class="col-lg-3 control-label">Отправлять в SLACK?&nbsp;&nbsp;
 <input type="checkbox" name="sendslaks" value="1"[#if SENDSLAKS="1"#] checked[#endif#]> 
</label>
</div>
<br>

		<div class="form-group">
	<label class="col-lg-3 control-label">Отправлять на email?&nbsp;&nbsp;
 <input type="checkbox" name="sendemail" value="1"[#if SENDEMAIL="1"#] checked[#endif#]> 
</label>
</div>
<!-- LINKED_OBJECT (varchar) -->

<div class="form-actions">
 [#if ID!=""#]
 <button type="submit" name="subm" value="Submit" class="btn btn-primary"><#LANG_SUBMIT#></button>
 [#else ID#]
 <button type="submit" name="subm" value="Add" class="btn btn-primary"><#LANG_ADD#></button>
 [#endif ID#]
 <a href="?data_source=<#DATA_SOURCE#>" class="btn btn-default"><#LANG_CANCEL#></a>

<input type="hidden" name="id" value="<#ID#>">
<input type="hidden" id="users_id" name="users_id" value="<#USERS_ID#>">
<input type="hidden" name="view_mode" value="<#VIEW_MODE#>">
<input type="hidden" name="edit_mode" value="<#EDIT_MODE#>">
<input type="hidden" name="mode" value="update">
<input type="hidden" name="data_source" value="<#DATA_SOURCE#>">
<input type="hidden" name="tab" value="devparam">
</div>


</fieldset>
</form>
<br>
<img src="../cms/cached/nvr/last/cam[#ID#].jpg" width="60%"  ></a> &nbsp;&nbsp; &nbsp;&nbsp;
